# 3月7日活動報告
## 本日の予定

```
Programing
  ・Progate Ruby on RailsコースのstepⅢをクリア
  ・GitHubにて日報を書く
Toefl
  ・単語帳…9~15
  ・問題集…
- ゼミ
　- 2章をざっと読む 
- 趣味
  - 写真編集プラハ１日目まで完了　
```
___


## 本日の成果

- 勉強時間
  - 14:00~19:00
  - 21:30~25:00
- 合計8h30m

___

## 進捗
- Programing
  - Progate Ruby on RailsコースのstepⅡをクリア　☑
  - Progate Ruby on RailsコースのstepⅢのRuby 4までクリア
  - GitHubにて日報を書く　☑
- Toefl
  - 単語帳…7,8
  - 問題集…
- ゼミ
  - 2章をざっと読む ×
- 趣味
  - 写真編集プラハ１日目まで完了　×
  - 長期インターン用のESを書く　☑

## 学び　～Ruby～
- 共通部分のある異なるクラスを作りたいとき
  継承を使おう。共通部分はメインのクラス（親クラス）に記述し異なる部分をそれぞれ別のクラス（子クラス）に記述する。そして親クラスの内容を子クラスに継承する！！  
  class 新しいクラス名 < 元となるクラス名  
  とすることでそれが可能になる。
  またメソッド（関数）も親クラスのものを子クラスの中で使うことができる。  
  その際はsuperを使う。あくまで親クラスのメソッドを子クラスで使っていることになるので引数をしっかりと与える必要がある。  
  ※superでもってこれるのは同名メソッドに限る。
  
- WEB開発必要言語  
  ![必要言語](/images/language0307.png)

## 学び　～Ruby on Rails～
- 始め方  
  １，アプリケーションファイル一式を用意する  
  ```
  rails new tweet_app(アプリ名)
  ```
  これをすることでメインファイル(app/)、設定情報関連のファイル(config/),データベースファイル(db/)などが自動で作られる!!  
  ２，サーバーを立ち上げる
  ```
  rails server
  ```
  サーバーを起動した後、ブラウザで「localhost:3000」というURLにアクセスすると、初期画面が表示されるようになります。

- ページをつくる  
  ビュー(view),コントローラー(controller),ルーティング(routing)の３つのファイルが必要。  
  rails generate controller home top　で作成できる。  
  WEBページが表示されるときブラウザ→ルーティング→コントローラーの順で処理が行われ、ビューがブラウザに返される。

  １，ビュー(view)  
  ページの見た目を作るHTMLファイル。  

  ２，コントローラー(controller)  
  コントローラ内のアクション（メソッドのこと）は、ブラウザに返すビューをviewsフォルダの中から見つけ出す役割を担っている。具体的には、アクションは、コントローラと同じ名前のビューフォルダから、アクションと同じ名前のHTMLファイルを探してブラウザに返す。 
  ```
  def about
  end
  ``` 
  Railsにおいては変数はviewの中ではなくアクションの中で定義するのが一般的。この際、変数の先頭に@をつけるのを忘れないようにする。  
　

  ３，ルーティング(routing)  
  ルーティングは、送信されたURLに対して「どのコントローラの、
  どのアクション」で処理するかを決める「対応表」のこと。ブラウザでURLを入力すると、ルーティングがURLを見て、適切なコントローラのアクションを呼び出す。
  ```
  get "/about" => home#about
  ```
- データベース  
  データを管理するためのテーブル（表）を用意する必要がある。  

  1,マイグレーションファイルを作成する。  
    マイグレーションファイルとはデータベースに変更を指示するためのファイルである。  
    ```
    rails generate model (テーブルの名前) (カラムの名前):（テーブルに入る予定のデータの形式）
    例）rails g model Post content:text
    ```
    このコードによりマイグレーションファイルとテーブルの名前を持つモデル（クラスの特殊ver）が生成される。  
    ※モデル… ApplicationRecordを継承したクラス  

  2,テーブルを作成する。
    マイグレーションファイルにしたがってテーブルが作られる。以下のコードをターミナルで実行することで自動で生成される。
    ```
    rails db:migrate
    ```
    この処理をしないとエラーが発生するのでマイグレーションファイルを作ったときはこれを実行するのを忘れないように!!  

- HTMLファイルの中でRubyを使う  
  <% %>で囲むことでブラウザには表示されないRubyコードを記述できる。  
  例）<% post1 = "うんこ" %>  #変数に"うんこ"を代入
  <%= %>で囲むことでブラウザに表示されるRubyコードを記述できる。  
  例）<%= post1 %> #変数post1を出力して表示する。  

- データベースにデータを入れる  
  １，rails consoleでコンソールを起動する  
  ２，コンソール上でモデルを使って新しいインスタンスを生成する。  
  ３，saveメソッドを使って、生成したインスタンスをデータベースに保存する。  
- データベースからデータを取り出す。  
  コントローラー内で  
  @Posts=Post.all  
  のようにすることで取り出せる。
- リンクのつけ方  
  
  ＜HTML＞ver
  ```
  <a href="/about">About</a>
  ```
  < Ruby>ver
  ```
  <%= link_to("About","./about") %>
  ```
  Rubyで記述する利点はURLから取り出したidの情報などをもとにリンクを作成したいときに変数を代入して使えるところである。以下に例を示す。  
  ```
  <%= link_to(@post.content,"./posts/#{@post.id}") %>
  ```
- データベースからデータを取得する  
  find_byメソッドを使う。この際重要になるのは各データに必ずつけられているidである。モデル名.find_by(カラム名: 値)でできる。  
  ```
  Post.find_by(id:3)
  ```
- ルーティングの注意点  
  ルーティングは合致するURLをコードの上から順番に探していく。そのため当てはまりやすいルーティングは下の方に書く必要がある。  
  例）get "posts/index"=>"posts#index"  
  　　get "posts/:id" => "posts#show"  
  :idは○○という意味なのでindexもこれに該当する。そのためこれを上に書いてしまうとindexが表示されることがなくなってしまう。

- URLからデータを取り出す  
  paramsを使う。仮にURLが"/posts/:id"であるときこの[:id]の部分がparamsに自動的に入っているのでコントローラー内で  
  ```
  @id = params[:id]
  ```
  とすることでURLからid情報を取り出せる。

- 新しいデータをユーザーが入力できるようにする  
  
  １，まず< textarea></ textarea>や< input>などを使って入力枠を作 　る。  
  また< input type="submit" value="投稿">のようにして投稿ボタンも作成する。  

  ２，データベースに変更を加えるためのURL、アクション、ルーティングを用意する。    

    まずデータベースに変更を加えるためのアクションを作る必要がある。これはcreateアクションという。  
    またこのcreateアクションを呼び出すためのルーティングは今までのgetではなくpostを用いる。すなわち以下のようになる。  
    ※データベースに変更を加える→ルーティングはpost
    ```
    post "posts/create => "posts#create"
    ```
  ３，フォームに入力されたデータを指定のURLに送信する。  
    form_tagを用いる。form_tag(送信先のURL) do のようにして送信先のURLを指定する。
    ```
    <%= form_tag("/posts/create) do %>
        <textarea></textarea>
        <input type="submit" value="投稿">
    <% end %>
    ```
    ※<%= %>で囲む！！

  ４，createアクションに対するビューを作る。  
    新規投稿においてビューは必要ないためリダイレクトを使う。このメソッドはコントローラー内で用いる。
    ```
    def create
      redirect_to("/posts/index")
    end
    ```
  ５，データをcreateアクションに送る。  
    指定のURLに送ることができるようにはなっているがまだアクションでデータを扱えるようになっていない。そこで、まずtextareaに入力された情報に属性をつける。
    ```
    <textarea name="content">開発たのしい</textarea>
    ```
    このコードで
    content: 開発楽しい
    というデータがcreateアクションに送られるようになる。

  ６，createアクションでデータを受け取る。  
    paramsを用いる。params[:content]で入力データを受け取れるのでこれを代入して新しいインスタンスと生成しそのままsaveメソッドで保存する。
    ```
    def create
      @post = Post.new(content: params[:content])
      @post.save
      redirect_to("/posts/index")
    end
    ```
- 編集と削除  
  編集は、paramsを用いて取り出した投稿を書き直してsaveすることで行う。  
  削除は、paramsを用いて取り出した投稿をdestroyしてsaveすることで行う。

## 学び　～Git～
- Add
  ```
  git add .
  ```
  この"."は全てのファイルという意味。ここの"."を個別のファイル名などにするとそのファイルだけを変更することができる。
  Addは今の状況をステージに上げるということ。
- Commit
  ```
  git commit -m "Create index.html(コミットメッセージ)"
  ```
  コミットはAddでステージに挙げたファイルたちを実際に変更しますよと宣言している。ここでコミットメッセージなども書く。このコミットメッセージで変更内容などをチームメンバーに共有できる。
  このコミットは実は非常に大事。"git log"などすると今までのコミット履歴を見たりできる。コミットコードが毎回割り振られるため、このコードを使うことで前のバージョンに戻ったりできる。これがバージョン管理！！
- Push
  ```
  git push origin main　#mainブランチにプッシュする
  ```
  これで変更が実行される。これでGithubの中（リモート）のファイルたちが自分の変種していたコード（ローカル、VScodeなど）に書き換えられる。
___
## ～最重要～
- 変数はコントローラー内で定義する
- paramsの使い方  
  ![paramsの使い方](/images/params.png)
- 
____

### 所感
本日も非常に有意義な1日だった。12時半ごろにゆうたと合流し井の頭公園で自然を感じた後開発に励んだ。適宜小休憩を取ったり各自音楽を聴いて集中する時間を作ったりすることで約4時間半ほど作業をしとおすことができた。
また夜も10時から12時まではなりあきと、12時から1時半までは再びゆうたと通話しながら開発を進めProgateのRails5Ⅳまで終了させ加えて自分のPCでRails, Githubの開発環境を構築することもできた。Gitについてゆうたからの指導もあり理解が深まった。
総じて本日得た知識や成果は自分に自信を与えさらなる技術向上を後押しするとともに今後の開発の展望をもたらすものであった。
  
____
  

___

## 明日やること
```
Programing
  ・Progate Ruby on RailsコースのstepⅢをクリア☑
  ・GitHubにて日報を書く☑
  ・GithubとVScodeをつなぐことに成功
  ・Achillesのファイルを作成
Toefl
  ・単語帳…なし
  ・問題集…なし
- ゼミ
　- 2章をざっと読む …なし
- 趣味
  - 写真編集プラハ１日目まで完了…途中　
```

## 3月8日まで
```
・progateのweb開発(Ruby on Rails)を終わらせる
・HTML・CSS・Ruby on RailsでKOKUBANサイトの機能を実装する
・TOEFL単語帳40まで終わらせる
```

## 来週の終わりまで
```
・githubの使い方を勉強
・gitの使い方を勉強
・11日16:00~W-share開発会議
・TOEFL単語帳を1周完了
・KOKUBANサイトのデザインを整える
```

